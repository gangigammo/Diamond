{% extends "main.html" %}
{% block title %}
収支表閲覧
{% endblock %}

{% block body %}
    <a href="/delete/">データベース削除</a>
    <p>カテゴリー入力フォーム</p>
    <script>
        window.onload = function() {
            error = "{{categorySubscribeError}}";
            if(error == "blank"){
                document.getElementById("category").innerHTML = "カテゴリー入力がされていません";
            }else if(error == "duplication"){
                document.getElementById("category").innerHTML = "すでにそのカテゴリーは登録されています";
            }
        }
    </script>
    <form id="categoryForm" method="POST" action="/category/">
        <font color="red"><p id="category"></p></font>
        <p>カテゴリー名</p>
        <input type="text" name="registrationCategory">
        <p>種類</p>
        <select name="categoryType">
            <option value="income">収入</option>
            <option value="expense">支出</option>
        </select>
        <br>
        {% csrf_token %}
        <input type="submit" value="送信">
    </form>
    <p>収入入力フォーム</p>
    <form id="incomeForm" method="POST" action="/income/">
        <p>値</p>
        <input type="text" name="income">
        <p>内容</p>
        <input type="text" name="incomeDescription">
        <p>カテゴリー</p>
        <select name="incomeCategory">
            <option value="選択なし">選択なし</option>
            {% for incomeCategory in incomeCategories %}
            <option value={{incomeCategory.categoryName}}>{{incomeCategory.categoryName}}</option>
            {% endfor %}
        </select>
        <br>
        {% csrf_token %}
        <input type="submit" value="送信">
    </form>
    <p>支出入力フォーム</p>
    <form id="expenceForm" method="POST" action="/expence/">
        <p>値</p>
        <input type="text" name="expence">
        <p>内容</p>
        <input type="text" name="expenceDescription">
        <p>カテゴリー</p>
        <select name="expenseCategory">
            <option value="選択なし">選択なし</option>
            {% for expenseCategory in expenseCategories %}
            <option value={{expenseCategory.categoryName}}>{{expenseCategory.categoryName}}</option>
            {% endfor %}
        </select>
        <br>
        {% csrf_token %}
        <input type="submit" value="送信">
    </form>
    <h3>あなたの現在の収支は{{gain}}です。</h3>
    <table>
        <thead>
          <tr>
            <th>収入</th>
            <th>内容</th>
            <th>カテゴリー</th>
          </tr>
        </thead>
        <tbody>
            {% for income in incomes %}
            <tr>
              <td>{{income.amount}}</td>
              <td>{{income.description}}</td>
              <td>{{income.categoryName}}</td>
            </tr>
            {% endfor %}
            <tr>
                <td>{{sumIncomes}}</td>
                <td>合計</td>
            </tr>
        </tbody>
    </table>
    <table>
        <thead>
          <tr>
            <th>支出</th>
            <th>内容</th>
            <th>カテゴリー</th>
          </tr>
        </thead>
        <tbody>
            {% for expence in expences %}
            <tr>
                <td>{{expence.amount}}</td>
                <td>{{expence.description}}</td>
                <td>{{expence.categoryName}}</td>
            </tr>
            {% endfor %}
            <tr>
                <td>{{sumExpences}}</td>
                <td>合計</td>
            </tr>
        </tbody>
    </table>
{% endblock %}